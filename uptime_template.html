<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SaaS Accounts Application Uptime Report</title>

<style>
body{
  margin:0;
  padding:0;
  background:#f4f6f8;
  font-family:Segoe UI,Arial,sans-serif;
  font-size:13px;
  color:#1f2937;
}

/* ===== COMMON ===== */
.container{
  width:100%;
  background:#ffffff;
}

.section{
  padding:18px 28px;
}

.title{
  font-size:18px;
  font-weight:600;
}

.subtitle{
  font-size:13px;
  color:#6b7280;
  margin-top:4px;
}

/* ===== KPI CARDS ===== */
.kpi-row{
  width:100%;
  margin-top:16px;
}

.kpi{
  background:#f9fafb;
  border-radius:6px;
  padding:14px;
}

.kpi-value{
  font-size:18px;
  font-weight:700;
}

.green{ color:#16a34a; }
.red{ color:#dc2626; }

.kpi-label{
  font-size:12px;
  color:#6b7280;
  margin-top:4px;
}

/* ===== INCIDENT ===== */
.incident{
  background:#fff1f2;
  border-left:6px solid #dc2626;
  padding:14px;
  border-radius:4px;
}

.incident-title{
  font-weight:600;
  color:#dc2626;
  margin-bottom:8px;
}

/* ===== TABLE ===== */
.uptime-table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}

.uptime-table th{
  background:#e01e7e;
  color:#ffffff;
  padding:10px;
  font-size:12px;
  text-align:left;
}

.uptime-table td{
  padding:9px;
  border-bottom:1px solid #e5e7eb;
  font-size:12px;
}

.uptime-table tr:nth-child(even){
  background:#fafafa;
}

.tick{
  color:#16a34a;
  font-weight:700;
  margin-right:4px;
}

/* ===== FOOTER ===== */
.footer{
  border-top:1px solid #e5e7eb;
  padding:18px 28px;
  font-size:12px;
}
</style>
</head>

<body>

<table width="100%" cellpadding="0" cellspacing="0">
<tr>
<td align="center">

<table width="100%" class="container">

<!-- HEADER -->
<tr>
<td class="section">
  <div class="title">SaaS Accounts Application Uptime Report</div>
  <div class="subtitle">Weekly & Quarterly Availability Summary</div>
</td>
</tr>

<!-- KPI -->
<tr>
<td class="section">
<table width="100%" cellpadding="0" cellspacing="10" class="kpi-row">
<tr>
<td width="25%" class="kpi">
  <div class="kpi-value green">✔ {{ overall_uptime }}</div>
  <div class="kpi-label">Overall Uptime for the Week</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value red">{{ outage_count }}</div>
  <div class="kpi-label">Outages</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value">{{ total_downtime }} mins</div>
  <div class="kpi-label">Total Downtime</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value">{{ most_affected }}</div>
  <div class="kpi-label">Most Affected Account</div>
</td>
</tr>
</table>
</td>
</tr>

<!-- INCIDENT + CHART -->
<tr>
<td class="section">
<table width="100%" cellpadding="0" cellspacing="12">
<tr>
<td width="55%" valign="top">
  <div class="incident">
    <div class="incident-title">⚠ Major Incident of the Week</div>
    <div><b>Account:</b> {{ major_incident.account }}</div>
    <div><b>Outage Downtime:</b> {{ major_incident.outage }}</div>
    {% if major_incident.rca %}
    <div><b>RCA:</b> {{ major_incident.rca }}</div>
    {% endif %}
  </div>
</td>

<td width="45%" align="center">
  <img src="cid:downtime_chart" width="260">
</td>
</tr>
</table>
</td>
</tr>

<!-- WEEKLY -->
<tr>
<td class="section">
  <b>{{ weekly_title }}</b>
  {{ weekly_table | safe }}
</td>
</tr>

<!-- QUARTERLY -->
{% if quarterly_table %}
<tr>
<td class="section">
  <b>{{ quarterly_title }}</b>
  {{ quarterly_table | safe }}
</td>
</tr>
{% endif %}

<!-- FOOTER -->
<tr>
<td class="footer">
For any concern over above data, contact
<a href="mailto:incident@businessnext.com">incident@businessnext.com</a><br><br>

Best Regards,<br>
Atin Gambhir | Manager – ITSM (CDG)<br>
<img src="cid:businessnext_logo" width="90" style="margin-top:6px"><br>
www.businessnext.com<br>
<b style="color:#e01e7e;">#UpForTomorrow</b>
</td>
</tr>

</table>

</td>
</tr>
</table>

</body>
</html>
