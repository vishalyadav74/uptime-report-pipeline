<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SaaS Accounts Application Uptime Report</title>

<style>
body{
  margin:0;
  padding:0;
  background:#f4f6f8;
  font-family:Segoe UI,Arial,sans-serif;
  font-size:13px;
  color:#1f2937;
}

.container{ width:100%; background:#ffffff; }
.section{ padding:10px 18px; }

/* ================= HEADER ================= */
.header{
  background:#e01e7e;
  color:#ffffff;
  padding:16px 20px;
}
.header-title{ font-size:18px; font-weight:600; }
.header-subtitle{ font-size:13px; opacity:.9; margin-top:4px; }

/* ================= KPI ================= */
.kpi-row{ width:100%; margin-top:8px; }
.kpi{
  background:#f9fafb;
  border-radius:8px;
  padding:10px;
}
.kpi-value{ font-size:17px; font-weight:700; }
.green{ color:#16a34a; }
.red{ color:#dc2626; }
.orange{ color:#f59e0b; }
.purple{ color:#7c3aed; }
.kpi-label{ font-size:12px; color:#6b7280; margin-top:2px; }

/* ================= INCIDENT ================= */
.incident{
  background:#fff5f5;
  border-left:5px solid #ef4444;
  padding:14px;
  border-radius:6px;
  line-height:1.6;
}
.incident-title{
  font-weight:600;
  color:#dc2626;
  margin-bottom:6px;
}

/* ================= DONUT ================= */
.donut-box{
  background:#ffffff;
  border-radius:10px;
  padding:10px;
  border:1px solid #e5e7eb;
  text-align:center;
}
.donut-note{
  margin-top:6px;
  font-size:12px;
  font-weight:600;
  color:#16a34a;
}

/* ================= SECTION HEADERS ================= */
.section-header{
  margin:10px 0 4px;
  padding-left:8px;
  border-left:4px solid #e01e7e;
  font-weight:600;
  color:#374151;
}

/* ================= TABLE ================= */
.uptime-table{
  width:100%;
  border-collapse:collapse;
  margin-top:4px;
}
.uptime-table th,
.uptime-table td{
  border:1px solid #e5e7eb;
  padding:7px;
  font-size:12px;
}
.uptime-table th{
  background:#e01e7e;
  color:#ffffff;
  text-align:left;
}
.uptime-table tr:nth-child(even){
  background:#fafafa;
}

/* ‚úî tick always green */
.tick-circle{
  display:inline-block;
  width:15px;
  height:15px;
  border-radius:50%;
  background:#22c55e;
  color:#ffffff;
  font-size:11px;
  line-height:15px;
  text-align:center;
  margin-right:6px;
}

/* ================= FOOTER ================= */
.footer{
  border-top:1px solid #e5e7eb;
  padding:14px 18px;
  font-size:12px;
}
</style>
</head>

<body>

<table width="100%" cellpadding="0" cellspacing="0">
<tr><td align="center">

<table width="100%" class="container">

<!-- HEADER -->
<tr>
<td class="header">
  <div class="header-title">SaaS Accounts Application Uptime Report</div>
  <div class="header-subtitle">Weekly & Quarterly Availability Summary</div>
</td>
</tr>

<!-- KPI -->
<tr><td class="section">
<table width="100%" cellpadding="0" cellspacing="8" class="kpi-row">
<tr>
<td width="25%" class="kpi">
  <div class="kpi-value green">‚úî {{ overall_uptime }}</div>
  <div class="kpi-label">Overall Uptime for the Week</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value red">‚ö† {{ outage_count }}</div>
  <div class="kpi-label">Outages</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value orange">‚è± {{ total_downtime }} mins</div>
  <div class="kpi-label">Total Downtime</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value purple">üö© {{ most_affected }}</div>
  <div class="kpi-label">Most Affected Account</div>
</td>
</tr>
</table>
</td></tr>

<!-- INCIDENT + DONUT -->
<tr><td class="section">
<table width="100%" cellpadding="0" cellspacing="8">
<tr>

<td width="62%" valign="top">
  <div class="incident">
    <div class="incident-title">üö® Major Incident of the Week</div>
    <div><b>Account:</b> {{ major_incident.account }}</div>
    <div><b>Outage Downtime:</b> {{ major_incident.outage }}</div>
    {% if major_incident.rca %}
    <div><b>RCA:</b> {{ major_incident.rca }}</div>
    {% endif %}
  </div>
</td>

<td width="38%" valign="top" align="center">
  <div class="donut-box">
    <img src="cid:downtime_chart" width="200" style="display:block;margin:auto;">
    <div class="donut-note">{{ overall_uptime }}</div>
  </div>
</td>

</tr>
</table>
</td></tr>

<!-- WEEKLY -->
<tr><td class="section">
  <div class="section-header">{{ weekly_title }}</div>
  {{ weekly_table | safe }}
</td></tr>

<!-- QUARTERLY -->
{% if quarterly_table %}
<tr><td class="section">
  <div class="section-header">{{ quarterly_title }}</div>
  {{ quarterly_table | safe }}
</td></tr>
{% endif %}

<!-- FOOTER -->
<tr><td class="footer">
For any concern over above data, contact
<a href="mailto:incident@businessnext.com">incident@businessnext.com</a><br><br>

Best Regards,<br>
Atin Gambhir | Manager ‚Äì ITSM (CDG)<br>
<img src="cid:businessnext_logo" width="90" style="margin-top:6px"><br>
www.businessnext.com<br>
<b style="color:#e01e7e;">#UpForTomorrow</b>
</td></tr>

</table>
</td></tr>
</table>

</body>
</html>
