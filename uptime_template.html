<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SaaS Accounts Application Uptime Report</title>

<style>
body{
  margin:0;
  padding:0;
  background:#f4f6f8;
  font-family:Segoe UI,Arial,sans-serif;
  font-size:13px;
  color:#1f2937;
}

.container{ width:100%; background:#ffffff; }
.section{ padding:18px 28px; }

.title{ font-size:18px; font-weight:600; }
.subtitle{ font-size:13px; color:#6b7280; margin-top:4px; }

/* ---------- KPI ---------- */
.kpi-row{ width:100%; margin-top:14px; }
.kpi{
  background:#f9fafb;
  border-radius:8px;
  padding:14px;
}
.kpi-value{ font-size:18px; font-weight:700; color:#16a34a; }
.kpi-label{ font-size:12px; color:#6b7280; margin-top:4px; }

/* ---------- INCIDENT ---------- */
.incident{
  background:#fff5f5;
  border-left:6px solid #ef4444;
  padding:22px 20px;
  border-radius:6px;
  min-height:150px;
  line-height:1.8;
}
.incident-title{
  font-weight:600;
  color:#dc2626;
  margin-bottom:10px;
}

/* ---------- DONUT ---------- */
.donut-box{
  background:#ffffff;
  border-radius:10px;
  padding:14px;
  text-align:center;
}
.donut-center{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  text-align:center;
}
.donut-circle{
  width:54px;
  height:54px;
  border-radius:50%;
  background:#22c55e;
  color:#ffffff;
  font-size:26px;
  line-height:54px;
  margin:0 auto 6px;
  font-weight:700;
}
.donut-value{
  font-size:14px;
  font-weight:700;
  color:#16a34a;
}

/* ---------- TABLE ---------- */
.uptime-table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
.uptime-table th{
  background:#e01e7e;
  color:#ffffff;
  padding:10px;
  font-size:12px;
  text-align:left;
}
.uptime-table td{
  padding:9px;
  border-bottom:1px solid #e5e7eb;
  font-size:12px;
}
.uptime-table tr:nth-child(even){ background:#fafafa; }

.tick-circle{
  display:inline-block;
  width:16px;
  height:16px;
  border-radius:50%;
  background:#22c55e;
  color:#ffffff;
  font-size:11px;
  line-height:16px;
  text-align:center;
  margin-right:6px;
}

/* ---------- FOOTER ---------- */
.footer{
  border-top:1px solid #e5e7eb;
  padding:18px 28px;
  font-size:12px;
}
</style>
</head>

<body>

<table width="100%" cellpadding="0" cellspacing="0">
<tr><td align="center">

<table width="100%" class="container">

<!-- HEADER -->
<tr><td class="section">
  <div class="title">SaaS Accounts Application Uptime Report</div>
  <div class="subtitle">Weekly & Quarterly Availability Summary</div>
</td></tr>

<!-- KPI -->
<tr><td class="section">
<table width="100%" cellpadding="0" cellspacing="10" class="kpi-row">
<tr>
<td width="25%" class="kpi">
  <div class="kpi-value">{{ overall_uptime }}</div>
  <div class="kpi-label">Overall Uptime for the Week</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value">{{ outage_count }}</div>
  <div class="kpi-label">Outages</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value">{{ total_downtime }} mins</div>
  <div class="kpi-label">Total Downtime</div>
</td>
<td width="25%" class="kpi">
  <div class="kpi-value">{{ most_affected }}</div>
  <div class="kpi-label">Most Affected Account</div>
</td>
</tr>
</table>
</td></tr>

<!-- INCIDENT + DONUT -->
<tr><td class="section">
<table width="100%" cellpadding="0" cellspacing="16">
<tr>

<td width="60%" valign="top">
  <div class="incident">
    <div class="incident-title">ðŸš¨ Major Incident of the Week</div>
    <div><b>Account:</b> {{ major_incident.account }}</div>
    <div><b>Outage Downtime:</b> {{ major_incident.outage }}</div>
    {% if major_incident.rca %}
    <div><b>RCA:</b> {{ major_incident.rca }}</div>
    {% endif %}
  </div>
</td>

<td width="40%" valign="top" align="center">
  <div class="donut-box" style="position:relative;">
    <img src="cid:downtime_chart" width="260">
    <div class="donut-center">
      <div class="donut-circle">âœ“</div>
      <div class="donut-value">{{ overall_uptime }}</div>
    </div>
  </div>
</td>

</tr>
</table>
</td></tr>

<!-- WEEKLY -->
<tr><td class="section">
  <b>{{ weekly_title }}</b>
  {{ weekly_table | safe }}
</td></tr>

<!-- QUARTERLY -->
{% if quarterly_table %}
<tr><td class="section">
  <b>{{ quarterly_title }}</b>
  {{ quarterly_table | safe }}
</td></tr>
{% endif %}

<!-- FOOTER -->
<tr><td class="footer">
For any concern over above data, contact
<a href="mailto:incident@businessnext.com">incident@businessnext.com</a><br><br>

Best Regards,<br>
Atin Gambhir | Manager â€“ ITSM (CDG)<br>
<img src="cid:businessnext_logo" width="90" style="margin-top:6px"><br>
www.businessnext.com<br>
<b style="color:#e01e7e;">#UpForTomorrow</b>
</td></tr>

</table>
</td></tr>
</table>

</body>
</html>
